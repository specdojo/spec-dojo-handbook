z# grandma-candy-shop

![Grandma Candy Shop](./docs/handbook/story/images/grandma-candy-shop-hero.jpg)

駄菓子屋「きぬや」の業務（販売・在庫・仕入・発注・品質・テスト・移行・決定記録 など）を体系的に整理し、将来的なシステム化・改善活動を支援するためのドキュメントリポジトリです。アプリケーションコードよりも、まず業務/アーキテクチャ/設計知識のベースラインを確立することを目的としています。

## 目的

- 小規模小売（駄菓子屋）における販売管理・在庫管理・発注補充・品質/テスト・移行計画・アーキテクチャ判断を一元管理
- 将来の実装（API/DB/UI）に先行して共通言語（用語集 / 業務イベント / ビジネスルール）を確立
- 決定記録（ADR）による意思決定の透明性確保

## 特徴

- ドメイン視点：業務仕様（概念DFD / クラス / 用語 / イベント / 受入条件）を段階的に整理
- アーキ視点：C4（コンテキスト/コンテナ/コンポーネント）で俯瞰
- 品質視点：非機能・アクセス制御・エラー処理・監査/モニタリング
- テスト視点：戦略→観点→各テスト階層→受入条件
- 移行/カットオーバー/決定記録まで含む“業務システム標準ドキュメント構成”

## リポジトリ構成（抜粋）

```plaintext
docs/
 project/
  000-プロジェクト/      # 背景・スコープ・課題アプローチ
  010-業務仕様/         # 業務仕様（概念DFD/クラス/用語/イベント 等）
  020-アーキテクチャ/    # C4図・インフラ構成
  030-システム設計/      # 実装視点のDFD/クラス/画面/シーケンス/DB/バッチ
  040-インターフェース/  # API/外部IF/メッセージ仕様
  050-品質/              # 非機能・アクセス制御・監査・エラー処理
  060-テスト/            # テスト戦略～各階層・受入テスト
  080-移行/              # 業務移行方針/データ移行設計/カットオーバー
  090-決定記録/          # ADR (Architecture Decision Records)
 handbook/
  story/                 # 物語的背景（キャラクター設定 等）
```

## セットアップ

本リポジトリは主に Markdown ドキュメントです。Node.js は以下の用途で使用します。

- markdownlint による文書品質チェック
- commitlint & lefthook によるコミット規約運用

### 前提

- Node.js (推奨: 18 以降)

### 初期化

```bash
npm install
npm run prepare   # lefthook のフックインストール
```

## 利用可能スクリプト

| スクリプト | コマンド              | 説明                     |
| ---------- | --------------------- | ------------------------ |
| Lint (MD)  | `npm run lint:md`     | Markdown の静的チェック  |
| Lint Fix   | `npm run lint:md:fix` | 自動修正可能な範囲を整形 |

## ドキュメント作成ガイド

各ディレクトリの `README.md` は共通テンプレート（目的 / 内容 / 必要性 / 無いと困る点 / サンプル）に準拠します。新規ドキュメント追加時は同形式を踏襲してください。

推奨ルール：

- 1ファイル1トピック（粒度を揃える）
- Mermaid 図は概念→論理→物理の順で詳細化
- 表は先頭行80文字程度以内で折り返しを検討
- ADR は `ADR-XXXX-title.md` 形式

## 品質管理

| 項目          | 手段                      | 備考                                        |
| ------------- | ------------------------- | ------------------------------------------- |
| Markdown 品質 | markdownlint              | 行長/見出し/空行などを統一                  |
| コミット規約  | commitlint (conventional) | `feat:`, `fix:`, `docs:` 等                 |
| フック運用    | lefthook                  | 事前フック追加予定（将来: lint 自動実行等） |

## 今後追加予定（例）

- 在庫台帳・未収台帳のER追加（論理→物理）
- API I/F スケルトン（OpenAPI）
- バッチスケジュール一覧と運用カレンダー
- 非機能要件の測定指標（SLO / SLI）明確化
- セキュリティ（脅威分析・権限ロールマトリクス）
- テスト観点カバレッジマッピング（要件→テスト）

## コントリビュート方法

1. Issue / 変更提案を起票（不足領域・改善点）
2. ブランチ作成（命名例: `docs/feature-用語集拡張`）
3. テンプレ準拠で Markdown 作成
4. `npm run lint:md` でLint通過確認
5. Conventional Commit メッセージで PR 作成

## ライセンス

本リポジトリは MIT ライセンスです（`LICENSE` 参照）。

## 著者 / 問い合わせ

Author: @naoji3x
Issue もしくは Pull Request にてフィードバックを歓迎します。

---

※ 本 README は初期版です。構成や章立てはプロジェクト進行に応じて進化させてください。
