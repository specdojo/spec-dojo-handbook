# ドキュメントフェーズ概要

Document Phases Overview

本ドキュメントは、
要求 → 要件 → 仕様 → 設計 → 実装
の各フェーズにおいて整理する内容の全体概要について定義する。

| フェーズ | 本質                   |
| -------- | ---------------------- |
| 要求     | なぜやりたいか         |
| 要件     | 何を満たす必要があるか |
| 仕様     | どう振る舞うべきか     |
| 設計     | どう実現するか         |
| 実装     | 実際に適用する         |

## 1. フェーズ全体対応表

| フェーズ | 用語                   | 5W1H             | 対象           | 定義                 |
| -------- | ---------------------- | ---------------- | -------------- | -------------------- |
| 1        | 要求（Needs）          | Why              | 業務・人       | 目的・価値・困りごと |
| 2        | 要件（Requirements）   | What（条件）     | 業務＋システム | 満たすべき条件       |
| 3        | 仕様（Specifications） | What（振る舞い） | 業務＋システム | 振る舞いの定義       |
| 4        | 設計（Design）         | How（方式）      | 業務＋システム | 実現方式・構造       |
| 5        | 実装（Implementation） | How（具現）      | 業務＋システム | 実行・適用           |

## 2. フェーズ横断で特に危険なアンチパターン

| アンチパターン                    | 影響                   |
| --------------------------------- | ---------------------- |
| Why → What → How のトレースがない | 変更に耐えない         |
| 粒度が混在                        | 読めない・更新できない |
| 用語定義がない                    | 人・AIともに誤解       |
| 非機能を後回し                    | 使えない完成品         |

### 2.1. 超要約（1行ずつ）

| フェーズ | 典型的失敗             |
| -------- | ---------------------- |
| 要求     | 目的を言語化しない     |
| 要件     | 条件を検証可能にしない |
| 仕様     | 振る舞いを曖昧にする   |
| 設計     | 業務を設計しない       |
| 実装     | 現場に適用しない       |

### 2.2. 補足

> 多くの失敗は「能力不足」ではなく
> **フェーズの混同・省略・逆転**によって起きる。
> 本ガイドは、それを防ぐための思考の整理である。

## 3. 要求（Needs）

業務の目的・価値を定義するフェーズ

| 観点         | 内容（駄菓子屋の例）             |
| ------------ | -------------------------------- |
| 困りごと     | 暗算や在庫管理がつらくなってきた |
| 続けたい理由 | 子どもとの交流、地域の居場所     |
| ゴール       | 無理せず駄菓子屋を続けられること |

### 3.1. 要求フェーズのアンチパターン

| アンチパターン                     | 原因           | 起きる問題               | 駄菓子屋の例                           |
| ---------------------------------- | -------------- | ------------------------ | -------------------------------------- |
| 要求を書いたつもりで「手段」を書く | WhyとHowの混同 | 目的が不明確             | 「タブレットを導入したい」が要求になる |
| 要求を一文スローガンで終わらせる   | 合意の浅さ     | 判断軸が残らない         | 「店を続けたい」だけで理由がない       |
| 要求をエンジニアに丸投げ           | 役割誤解       | 価値が実装に反映されない | 「あとはいい感じに」                   |

**本質的な失敗** → _Why が文書として残らない_

## 4. 要件（Requirements）

要求を満たすための条件を定義するフェーズ

| 種別         | 要件（例）                     |
| ------------ | ------------------------------ |
| 業務要件     | 子どもを待たせないこと         |
| 業務要件     | 会計ミスを防ぐこと             |
| システム要件 | 合計金額を正しく算出できること |
| 制約・前提   | 機械が苦手でも使えること       |

制約・前提も要件として明文化する。

### 4.1. 要件フェーズのアンチパターン

| アンチパターン     | 原因          | 起きる問題   | 駄菓子屋の例             |
| ------------------ | ------------- | ------------ | ------------------------ |
| 要件を飛ばす       | 早く作りたい  | スコープ崩壊 | いきなりUI設計に入る     |
| 要件が抽象的       | 検証意識不足  | 受入不能     | 「簡単に使える」だけ     |
| 要件に設計を混ぜる | Shall/How混同 | 変更不能     | 「SQLiteで在庫管理する」 |

**本質的な失敗** → _「満たすべき条件」が検証可能でない_

## 5. 仕様（Specifications）

要件を満たすための振る舞いを定義するフェーズ。業務仕様とシステム仕様を区別する。
業務仕様は、現場のルール（人の判断を含む）。システム仕様は、入力・状態・出力として観測可能な振る舞い。

### 5.1. 業務仕様（Business Specification）

| 条件                       | 業務の振る舞い           |
| -------------------------- | ------------------------ |
| 子どもが商品を持ってきたら | 店主が合計金額を提示する |
| お金が足りない場合         | 販売は成立しない         |
| 販売成立時                 | 在庫を減らす             |
| 営業終了時                 | その日の売上を確認する   |

### 5.2. システム仕様（System Specification）

| 条件               | システムの振る舞い |
| ------------------ | ------------------ |
| 商品を選択したとき | 合計金額を表示する |
| 会計確定時         | 在庫数を1減らす    |
| 在庫が0のとき      | 選択不可とする     |
| 日付変更時         | 日次売上を集計する |

### 5.3. 仕様フェーズのアンチパターン

（業務仕様・システム仕様）

| アンチパターン         | 原因       | 起きる問題 | 駄菓子屋の例             |
| ---------------------- | ---------- | ---------- | ------------------------ |
| 業務仕様を書かない     | 暗黙知前提 | 現場不適合 | 売上確認のやり方が未定義 |
| 画面仕様＝仕様だと思う | 視覚偏重   | ルール抜け | 例外処理がない           |
| 例外・境界を書かない   | 正常系思考 | 現場停止   | お金が足りない時が未定義 |

**本質的な失敗** → _「どう振る舞うか」が曖昧_

## 6. 設計（Design）

仕様をどう実現するかを決めるフェーズ。業務設計とシステム設計に分けて整理する。

| 観点 | 業務設計               | システム設計           |
| ---- | ---------------------- | ---------------------- |
| 会計 | 商品をまとめて一括会計 | 会計処理コンポーネント |
| 在庫 | 営業後に在庫確認       | 在庫管理データ構造     |
| 操作 | 声出し確認を行う       | 大きなボタンUI         |
| 責務 | 店主の判断を明確化     | 処理を自動化           |

### 6.1. 設計フェーズのアンチパターン

| アンチパターン     | 原因         | 起きる問題   | 駄菓子屋の例                 |
| ------------------ | ------------ | ------------ | ---------------------------- |
| 設計＝IT設計だけ   | 業務軽視     | 業務が壊れる | 新レジ導入で会計が遅くなる   |
| 設計で仕様を変更   | フェーズ逆転 | 合意崩壊     | 設計段階で会計ルールを変える |
| 将来変更を考えない | 近視眼       | 保守不能     | 商品追加が毎回改修           |

**本質的な失敗** → _How が勝手に What を書き換える_

## 7. 実装（Implementation）

設計した内容を現実に適用するフェーズ。業務実装とシステム実装を区別する。

| 観点 | 業務実装               | システム実装     |
| ---- | ---------------------- | ---------------- |
| 会計 | 新しい会計手順に慣れる | 会計ロジック実装 |
| 在庫 | 紙メモをやめる         | 在庫更新処理     |
| 運用 | 毎日売上を確認         | 日次集計機能     |
| 検証 | 実務で問題ないか       | 単体・結合テスト |

### 7.1. 実装フェーズのアンチパターン

| アンチパターン   | 原因         | 起きる問題 | 駄菓子屋の例         |
| ---------------- | ------------ | ---------- | -------------------- |
| 作ったら終わり   | 業務実装軽視 | 使われない | 新手順の説明なし     |
| 現場検証をしない | テスト偏重   | 運用事故   | 実際はボタンが小さい |
| 実装で仕様を補完 | 文書不足     | 属人化     | 例外対応を口頭で処理 |

**本質的な失敗** → _現実に「適用」されない_
