---
id: otp-rules
title: 運用切替計画 作成ルール
type: rulebook
status: draft
---

Operations Transition Plan (OTP) Documentation Rules

本ドキュメントは、運用切替計画（ハイパーケア含む）ドキュメント（`otp-<term>`）を統一形式で記述するためのルールです。
切替後の運用を途切れさせず、初期不具合・問合せ増に耐える体制を作るための内容を定義します。

## 1. 全体方針

`otp-<term>` は、切替後の運用安定化と初期対応体制の SSOT とする。

- 監視/アラート、バックアップ/リストアなどの運用基盤を明記する
- 権限/アカウント移行と運用手順の変更点を整理する
- 問合せ窓口と一次対応体制、障害対応フローを明確にする
- ハイパーケア期間の増員体制（期間/当番/SLA）を定義する
- 旧システムの停止/参照方針とクローズ条件を明記する

## 2. 位置づけと用語定義（必要に応じて）

`otp-<term>` と他ドキュメントの関係を示します。必要に応じて Mermaid を使用してよい。

## 3. ファイル命名・ID規則

- `id` は `otp-<term>`（kebab-case。例: `otp-hypercare`）。
- ファイル名は `otp-010-運用切替計画-<term>.md` 等、プロジェクト内で一意になるように命名する。
- `<term>` は用語集(GL)の論理名キー（英小文字kebab-case）を用いる（表示名は title / ファイル名で日本語を使用してよい）。

## 4. 推奨 Frontmatter 項目

### 4.1. 設定内容

Frontmatter は共通スキーマに従います（参照: [docs/shared/schemas/spec-frontmatter.schema.yaml](../../../shared/schemas/spec-frontmatter.schema.yaml) / [meta-document-metadata-rules.md](meta-document-metadata-rules.md)）。

| 項目       | 説明                                         | 必須 |
| ---------- | -------------------------------------------- | ---- |
| id         | OTP ID（個別: `otp-<term>`）                 | ○    |
| type       | `migration` 固定                             | ○    |
| title      | 運用切替計画: <対象名>                       | ○    |
| status     | `draft` / `ready` / `deprecated`             | ○    |
| based_on   | 根拠となる仕様ID（ID配列。未指定は `[]` 可） | 任意 |
| supersedes | 置き換え関係（ID配列。未指定は `[]` 可）     | 任意 |

### 4.2. 推奨ルール

- `based_on` には運用・移行判断に直接利用した成果物（例: `mip-overview` / `cop-*` / `br-*`）のみ列挙する
- `based_on` / `supersedes` は ID 配列（未指定は `[]` 可）

## 5. 本文構成（標準テンプレ）

`otp-<term>` は以下の見出し構成を **順序固定** で配置します。

| 番号 | 見出し                          | 必須 |
| ---- | ------------------------------- | ---- |
| 1    | 概要（`<term>`）                | ○    |
| 2    | 監視/アラート                   | ○    |
| 3    | バックアップ/リストア           | ○    |
| 4    | 権限/アカウント移行             | ○    |
| 5    | 運用手順の変更点                | ○    |
| 6    | 問合せ窓口/一次対応             | ○    |
| 7    | 障害対応フロー                  | ○    |
| 8    | 初期増員体制（期間・当番・SLA） | ○    |
| 9    | 旧システムの停止/参照方針       | ○    |
| 10   | 移行完了後のクローズ条件        | ○    |

## 6. 記述ガイド

### 6.1. 概要（`<term>`）

生成する `otp-<term>` 本文の見出しは **## 1. 概要（`<term>`）**

- 切替後の運用安定化の目的と適用範囲を 1〜3 行で示す
- `mip-overview` のハイパーケア方針と整合させる

### 6.2. 監視/アラート

生成する `otp-<term>` 本文の見出しは **## 2. 監視/アラート**

- 監視対象、閾値、通知先を明記する
- 重大アラートの初動ルールを明記する

推奨フォーマット（表）:

| 監視対象 | 指標/閾値 | 通知先 | 備考 |
| -------- | --------- | ------ | ---- |

### 6.3. バックアップ/リストア

生成する `otp-<term>` 本文の見出しは **## 3. バックアップ/リストア**

- バックアップ頻度、保管先、復旧手順を明記する
- リストア時の責任者と完了基準を明記する

### 6.4. 権限/アカウント移行

生成する `otp-<term>` 本文の見出しは **## 4. 権限/アカウント移行**

- 旧/新の権限差分と移行タイミングを明記する
- 移行後のアクセス検証方法を明記する

### 6.5. 運用手順の変更点

生成する `otp-<term>` 本文の見出しは **## 5. 運用手順の変更点**

- 旧手順との差分を一覧で示す
- 変更理由と影響を明記する

推奨フォーマット（表）:

| 手順 | 旧  | 新  | 影響 |
| ---- | --- | --- | ---- |

### 6.6. 問合せ窓口/一次対応

生成する `otp-<term>` 本文の見出しは **## 6. 問合せ窓口/一次対応**

- 問合せ窓口、受付時間、一次対応範囲を明記する
- 受付チャネルと優先度分類を明記する

### 6.7. 障害対応フロー

生成する `otp-<term>` 本文の見出しは **## 7. 障害対応フロー**

- 障害発生時の判断/連絡/復旧の流れを明記する
- エスカレーション先と判断基準を明記する

### 6.8. 初期増員体制（期間・当番・SLA）

生成する `otp-<term>` 本文の見出しは **## 8. 初期増員体制（期間・当番・SLA）**

- ハイパーケアの期間、当番体制、SLA を明記する
- 期間終了の判断者と条件を明記する

### 6.9. 旧システムの停止/参照方針

生成する `otp-<term>` 本文の見出しは **## 9. 旧システムの停止/参照方針**

- 停止時期、参照可否、データ保持方針を明記する
- 停止後の問い合わせ対応を明記する

### 6.10. 移行完了後のクローズ条件

生成する `otp-<term>` 本文の見出しは **## 10. 移行完了後のクローズ条件**

- 完了条件（障害未発生期間、問い合わせ収束など）を列挙する
- クローズ判断者と最終報告物を明記する

## 7. 禁止事項

| 禁止事項                                    | 理由                               |
| ------------------------------------------- | ---------------------------------- |
| 監視/アラートの通知先や閾値が未記載         | 初動が遅れ、障害影響が拡大するため |
| ハイパーケア体制（期間/当番/SLA）を省略する | 初期増加負荷に耐えられないため     |
| 旧システム停止/参照方針が不明確             | 利用者・運用の混乱を招くため       |
| クローズ条件を未記載にする                  | 収束判定ができないため             |

## 8. サンプル（最小）

注：以下はルール文書内の例示です。生成する `otp-<term>` では `## 1...` から始まります。

```yaml
---
id: otp-hypercare
type: migration
title: 運用切替計画: ハイパーケア
status: draft
based_on: []
supersedes: []
---
```

### 8.1. 概要（hypercare）

切替後の運用安定化と初期対応体制を定義する。

### 8.2. 監視/アラート

| 監視対象 | 指標/閾値 | 通知先 | 備考    |
| -------- | --------- | ------ | ------- |
| API      | 5xx > 1%  | #ops   | 5分平均 |

### 8.3. バックアップ/リストア

- 夜間フルバックアップ、日中は差分
- 復旧は運用責任者が判断し、作業ログを残す

### 8.4. 権限/アカウント移行

- 移行タイミング: 切替前日 20:00
- 検証: 主要ロールでログイン確認

### 8.5. 運用手順の変更点

| 手順     | 旧   | 新       | 影響     |
| -------- | ---- | -------- | -------- |
| 障害連絡 | 電話 | チャット | 初動短縮 |

### 8.6. 問合せ窓口/一次対応

- 受付: #support / 09:00-18:00
- 一次対応: FAQ/ナレッジで切り分け

### 8.7. 障害対応フロー

- エスカレーション: 一次対応 -> 運用責任者 -> PO
- 判断基準: 重大障害 or 影響拡大

### 8.8. 初期増員体制（期間・当番・SLA）

- 期間: 切替後 2 週間
- 当番: 24/7（Ops 2名 + Biz 1名）
- SLA: P1 30分以内一次連絡

### 8.9. 旧システムの停止/参照方針

- 停止: 切替後 7 日でログイン停止
- 参照: 90 日間は参照専用

### 8.10. 移行完了後のクローズ条件

- 重大障害 0 件が 30 日継続
- 問合せが日次平均 5 件以下

## 9. 生成 AI への指示テンプレート

生成 AI に `otp-<term>` を作らせるときの指示テンプレートは `otp-instruction.md` を参照してください。
