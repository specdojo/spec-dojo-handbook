# ステータス一覧（Status List）作成ルール

業務上のエンティティが取り得る状態（ステータス）を一覧で定義します。

- 各ステータスの正式名称・通称・状態の説明・管理場所などを明記し、業務プロセスにおける状態や管理単位を明確にします。
- 詳細な状態遷移については、別途、概念状態遷移図(Conceptual State Transition Diagram, CSTD)で表現しますので、本一覧では状態の定義に集中します。

## 1. メタデータ

| 項目       | 説明                            | 必須 |
| ---------- | ------------------------------- | ---- |
| id         | ステータス一覧ID (stl-xxx-xxxx) | ○    |
| type       | `domain` 固定                   | ○    |
| title      | ステータス一覧名                | ○    |
| status     | `draft`/`ready`/`deprecated`    | ○    |
| owners     | 担当者                          | 任意 |
| tags       | タグ・分類                      | 任意 |
| supersedes | 置き換え関係（古仕様→新仕様）   | 任意 |

### 1.1 ID規約

- ステータス一覧IDは `^stl-[a-z0-9-]+$` に合致する一意IDを用いる。
- `type: domain` は業務ドメイン仕様であることを示す。

## 2. 記述ルール

- エンティティのステータスを ステータス定義 と 値の説明（ステータス一覧） の二つの表で整理する。
- ステータス（正式名称）＝用語集の term と一致させる。
- 呼称＝現場で使用される言い方（例：店主・おばあちゃんが日常使う表現） を記載する。
- ステータスの説明には 状態の意味＋成立条件（いつこの状態になるか）＋終了条件（次に進む条件） を簡潔に含める。
- 値はシステム上の識別子として lower-kebab-case を使用する。
- 業務種類に応じて系統や保管場所やデータストアなどの追加列を任意で拡張してよい。
- 略語のみの記述や曖昧な説明は避ける。

### 2.1 ステータス定義の説明

ステータス定義は、**「定義項目 / 内容」** の 2 列の表で記述します。

| 定義項目         | 内容（説明）                                                                     |
| ---------------- | -------------------------------------------------------------------------------- |
| 対象エンティティ | 状態が属する業務上の主要対象（例：お金、注文など）                               |
| ステータス定義名 | 状態を表す項目（フィールド）名                                                   |
| 説明             | 項目の意味・役割・業務上の扱い                                                   |
| 状態遷移の観点   | 状態遷移を考える際の主要な切り口・基準（例：保管場所の移動、帳簿確定タイミング） |

### 2.2 ステータス一覧の説明

| 列名                     | 説明                                                            |
| ------------------------ | --------------------------------------------------------------- |
| **値**                   | システム上で扱うステータスコード。`lower-kebab-case` を用いる。 |
| **ステータス**           | 状態の正式名称（日本語単数形）。用語集 term と一致させる。      |
| **呼称**                 | 現場で使われる日常的な言い方。                                  |
| **説明**                 | 状態の意味・成立条件・終了条件を明快に記載する。                |
| **系統**（任意）         | 状態の性質や由来に基づく分類（例：売上／釣銭／混合）。          |
| **データストア**（任意） | 状態を記録・管理する帳簿や台帳、データベース。                  |
| **保管場所**（任意）     | 対象が物理的/論理的に存在する場所。                             |

### 2.3 詳細表の列順

以下の順に統一する：

値 → ステータス → 呼称 → 説明 → 系統（任意） → データストア（任意） → 保管場所（任意）

## 3. サンプル

### 3.1 メタデータ（front-matter YAML）

```yaml
---
id: stl-money
type: domain
title: お金のステータス
status: draft
owners: []
tags: []
supersedes: []
---
```

### 3.2 ステータス定義

| 定義項目         | 内容                               |
| ---------------- | ---------------------------------- |
| 対象エンティティ | お金                               |
| ステータス定義名 | お金のステータス                   |
| 説明             | お金の流れにおける各状態           |
| 状態遷移の観点   | 保管場所の移動／帳簿確定タイミング |

### 3.3 ステータス一覧

| 値                       | ステータス | 呼称         | 説明                                       | 系統       | データストア       | 保管場所 |
| ------------------------ | ---------- | ------------ | ------------------------------------------ | ---------- | ------------------ | -------- |
| sales-proceeds           | 受領直後金 | もらったお金 | お客様から受け取って、まだレジに入れたお金 | 売上       | レジ記録           | レジ     |
| cash-in-register         | レジ現金   | レジのお金   | レジ内にある売上金と釣銭準備金のまとまり   | 売上＋釣銭 | レジ記録           | レジ     |
| change-fund              | 釣銭準備金 | おつり用     | 朝レジに入れておく、おつり用のお金         | 釣銭       | レジ記録、会計帳簿 | レジ     |
| cash-transferred-to-safe | 金庫保管金 | 金庫のお金   | レジ締め後に金庫へ移した売上金             | 売上       | レジ記録、会計帳簿 | 金庫     |
| bank-deposit             | 銀行預入金 | 銀行のお金   | 金庫から銀行に預けた売上金                 | 売上       | 会計帳簿           | 銀行口座 |

### 判定ルール

- 会計帳簿計上済みかどうかは、「データストア」に **会計帳簿** が含まれるかで判定する。

## 4. 生成 AI への指示テンプレート

生成 AI にステータス一覧（STS）を作らせるときは、以下のような指示を与えます。

> - 以下のルールに従って、**ステータス一覧（Status: STS）** を 1 ファイル作成してください。出力は **Markdown** とします。
> - 対象は「状態（ステータス）の定義」です。詳細な状態遷移は CSTD 側で扱うため、本ドキュメントでは「状態の意味」「成立条件」「終了条件」を明確にしてください。
> - 禁止: 物理テーブル名・物理カラム名・SQL全文、実装クラス/関数名、APIの内部実装詳細、クリック手順など UI 操作の逐語列挙
> - 先頭に YAML Frontmatter を付与し、以下の形式で記述してください（不要な項目は省略可だが、`id` / `type` / `title` / `status` は必須）：
>
>   ```yaml
>   ---
>   id: stl-<英小文字とハイフンで構成したID> # 例: stl-money
>   type: domain
>   title: <ステータス一覧名> # 例: お金のステータス
>   status: draft # draft / ready / deprecated のいずれか
>   owners: []
>   tags: []
>   supersedes: []
>   ---
>   ```
>
> - 本文には、少なくとも次の見出し（日本語）と表を含めてください：
>   > 1. ステータス定義
>   > 2. ステータス一覧
> - **ステータス定義** は **「定義項目 / 内容」** の 2 列の表で記述し、次の定義項目（行）を含めてください：
>   > 対象エンティティ / ステータス定義名 / 説明 / 状態遷移の観点
> - **ステータス一覧** は表形式で、次の列を **この順序** で必ず含めてください（後ろ 3 列は任意）：
>   > 値 / ステータス / 呼称 / 説明 / 系統（任意） / データストア（任意） / 保管場所（任意）
> - 「ステータス（正式名称）」は **用語集の term と一致** させてください（日本語単数形）。
> - 「値」はシステム上の識別子として **lower-kebab-case** を用いてください。
> - 「説明」には、状態の意味に加えて **成立条件（いつこの状態になるか）** と **終了条件（次に進む条件）** を簡潔に含めてください。
> - 任意列のうち「データストア」は、帳簿・台帳・DBなどの **記録・管理先** を業務用語で記載してください。
> - 略語のみの記述や、検証不能な曖昧表現は避け、業務用語で統一してください。
