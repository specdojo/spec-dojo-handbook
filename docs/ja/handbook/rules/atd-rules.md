# 受入テスト設計（ATD）作成ルール

本ドキュメントは、
**受入テスト仕様（ATS / ATS-D）で定義された「受け入れ可能かどうか」を、
実際にどのような構成・観点・単位で確認するかを設計するための標準ルール**です。

ATD は、

- 業務側の受入判断を **再現可能・説明可能なテスト構造**に落とす
- 受入テストを「属人判断」にせず、**合意された設計に基づく判断**にする

ことを目的とします。

---

## 0. 位置づけ（必読）

```plaintext
TSP（テスト戦略・方針）
 └ ATS（受入テスト仕様）
    └ ATS-D（受入テスト仕様・個別）
       └ ATD（受入テスト設計）        ← 本書
          └ ATD-D（受入テスト設計・個別）
             └ 受入テスト実施・結果
```

| 観点   | ATS            | ATD                  |
| ------ | -------------- | -------------------- |
| 主眼   | 受入基準の定義 | **受入確認の設計**   |
| 粒度   | 仕様           | 設計                 |
| 視点   | 業務判断       | 業務判断を支える構造 |
| ケース | 書かない       | **まだ書かない**     |

---

## 1. 全体方針

- ATD は **受入テスト全体の設計方針**を定義します。
- ATD では以下を明確にします：
  - 受入テストの分割単位
  - 受入観点をどの単位で確認するか
  - 個別設計（ATD-D）への分解方針

- 具体的な操作手順・入力値・期待結果は **ATD-D 以下に委譲**します。

---

## 2. 対象範囲

ATD の対象は以下です。

- 業務受入条件（BAC）に基づく受入テスト
- 業務シナリオ・業務イベント
- 運用開始に関わる確認事項

※ 技術的な性能試験や詳細なエラーハンドリングは原則対象外
（必要な場合は ATS で明示）

---

## 3. ファイル命名・ID規則

### ファイル名（推奨）

```sh
010-受入テスト設計.md
```

### ID ルール

| 項目   | ルール                     |
| ------ | -------------------------- |
| prefix | `atd-`                     |
| id     | `atd-main`, `atd-overview` |

※ 原則 **1ファイル = 受入テスト設計（全体）**

---

## 4. 推奨 Frontmatter 項目

| 項目       | 説明                         | 必須     |
| ---------- | ---------------------------- | -------- |
| id         | ATD ID（`atd-*`）            | ○        |
| type       | `test` 固定                  | ○        |
| title      | 受入テスト設計               | ○        |
| status     | `draft / ready / deprecated` | ○        |
| owners     | 業務側／QA                   | 任意     |
| tags       | `acceptance-test`            | 任意     |
| depends_on | `ats-main`, `ats-*`, `bac-*` | **必須** |
| tests      | 下位の ATD-D                 | 任意     |
| supersedes | 置換関係                     | 任意     |

---

## 5. 本文構成（標準テンプレ）

ATD は以下の見出しを **必ずこの順序**で記述します。

1. 概要
2. 設計方針
3. 受入テストの分割単位
4. 受入観点の整理
5. テスト実施構成
6. 個別設計（ATD-D）への分解方針
7. 前提条件・制約
8. 対象外
9. メモ / 将来課題

---

## 6. 記述ガイド詳細

### 6.1 概要

- 受入テスト設計の目的と位置づけを簡潔に記述します。

例：

> 本設計は、受入テスト仕様で定義された業務受入条件を、実施可能なテスト構成に落とし込むことを目的とする。

---

### 6.2 設計方針（必須）

- 受入テストをどう組み立てるかの **考え方** を示します。

例：

- 業務受入条件（BAC）単位でテストを構成する
- 業務フロー全体の成立を重視する
- 例外的な運用判断は個別に確認する

---

### 6.3 受入テストの分割単位（必須）

- テストをどの単位で分けるかを定義します。

例：

| 分割軸       | 単位例                 |
| ------------ | ---------------------- |
| 業務受入条件 | 受注完了、在庫引当完了 |
| 業務シナリオ | 通常、例外対応         |
| 業務イベント | 発注確定、出荷完了     |

---

### 6.4 受入観点の整理（必須）

ATS で定義された観点を、設計として整理します。

| 観点カテゴリ | 観点                     |
| ------------ | ------------------------ |
| 業務         | 業務が成立する           |
| 操作         | 業務担当者が理解可能     |
| 情報         | 必要情報が参照可能       |
| 運用         | 問い合わせ・再処理が可能 |

---

### 6.5 テスト実施構成（必須）

- 実施順序・構成上の前提を記述します。

例：

- 業務シナリオ単位で独立実施
- 必要に応じて再実行可能
- 判定は業務担当者が行う

---

### 6.6 個別設計（ATD-D）への分解方針（必須）

- どの単位で ATD-D を作成するかを明確にします。

例：

- 業務受入条件ごとに 1 ATD-D
- 重要シナリオは細分化する

---

### 6.7 前提条件・制約（必須）

- 受入テスト実施に必要な前提条件を記述します。

例：

- 業務マスタが準備済み
- 操作手順書が整備済み

---

### 6.8 対象外

- 本設計で扱わない事項

---

### 6.9 メモ / 将来課題

- 将来の受入条件追加
- 未確定事項

---

## 7. 禁止事項

| 禁止事項               | 理由           |
| ---------------------- | -------------- |
| テストケースの列挙     | ATD-D の責務   |
| 入力値・期待値の具体化 | 実装レベル     |
| 技術的な実装詳細       | 業務判断に不要 |
| UI操作の逐語列挙       | 変更に弱い     |

---

## 8. サンプル（最小）

```yaml
---
id: atd-main
type: test
title: 受入テスト設計
status: draft
depends_on:
  - ats-main
  - bac-main
---
```

---

## 9. 生成AI向け指示テンプレート

> - 以下のルールに従って **受入テスト設計（ATD）** を 1 ファイル作成してください。
> - 受入テスト仕様（ATS / ATS-D）を前提に、分割単位・観点・構成を設計してください。
> - テストケースや操作手順は記載せず、設計方針を中心に記述してください。
> - 業務視点での受入判断に資する構造にしてください。
