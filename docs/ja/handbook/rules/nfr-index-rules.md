---
id: nfr-index-rules
title: 非機能要件インデックス 作成ルール
type: rulebook
status: draft
---

Non-Functional Requirements Index Documentation Rules

本ドキュメントは、非機能要件（NFR）をカテゴリ別に分冊管理するための `nfr-index` 作成ルールを定義する。
`nfr-index` は一次情報の入口であり、各カテゴリ（信頼性、可用性、保守性、完全性、機密性・安全性、性能、運用、操作性）への導線を管理する。

## 1. 全体方針

- `nfr-index` は NFR 分冊（8カテゴリ）の入口とし、重複記述を避ける。
- 各カテゴリの要求は「測定可能・検証可能」で記述し、合否判定ができる状態を維持する。
- 実装詳細は書かず、要求・基準・検証方法・導線に集中する。
- 分冊追加や統廃合時は `nfr-index` を最初に更新する。

## 2. 位置づけと用語定義（必要に応じて）

### 2.1. 位置づけ

- `nfr-index`：NFR 全体の入口（本体）
- `nfr-<category>`：カテゴリ別 NFR 本文（分冊）
- `sac-*` / `sts-*`：NFR の合否を検証する受入条件・試験仕様
- `opd-*` / `opr-*`：運用方針・運用手順への接続先
- `adr-*`：例外基準や判断記録

### 2.2. 用語定義

| 用語      | 定義                                               |
| --------- | -------------------------------------------------- |
| NFR       | 非機能要件。性能、可用性、セキュリティ等の品質要求 |
| NFR Index | 各NFR分冊への導線を集約する文書                    |
| 合否基準  | 要求を満たすか判定できる閾値・条件                 |

## 3. ファイル命名・ID規則

- ルールドキュメントIDは `nfr-index-rules` を用いる。
- 生成対象ドキュメントIDは `nfr-index` を推奨する。
- 分冊IDは `nfr-reliability` / `nfr-availability` などカテゴリ名を用いる。
- 1分冊 = 1カテゴリを原則とする。

## 4. 推奨 Frontmatter 項目

### 4.1. 設定内容

Frontmatter は共通スキーマに従います（参照: [shared/schemas/spec-frontmatter.schema.yaml](../../../../shared/schemas/spec-frontmatter.schema.yaml) / [meta-document-metadata-rules.md](meta-document-metadata-rules.md)）。

| 項目       | 説明                                            | 必須 |
| ---------- | ----------------------------------------------- | ---- |
| id         | NFR Index ID（推奨: `nfr-index`）               | ○    |
| type       | `architecture` など共通スキーマで許容される種別 | ○    |
| title      | 非機能要件: インデックス                        | ○    |
| status     | `draft` / `ready` / `deprecated`                | ○    |
| based_on   | 根拠となる仕様ID（ID配列。未指定は `[]` 可）    | 任意 |
| supersedes | 置き換え関係（ID配列。未指定は `[]` 可）        | 任意 |

### 4.2. 推奨ルール

- `based_on` は NFR 策定根拠（業務仕様・アーキ方針・運用方針）だけを列挙する。
- `supersedes` は旧NFRを置換する場合のみ記載する。

## 5. 本文構成（標準テンプレ）

`nfr-index` は以下の見出し構成を **順序固定** で配置する。

| 番号 | 見出し                                      | 必須 |
| ---- | ------------------------------------------- | ---- |
| 1    | 概要（対象範囲・管理方針）                  | ○    |
| 2    | カテゴリ一覧（8カテゴリ）                   | ○    |
| 3    | 分冊ドキュメント一覧（ID/参照先/Owner）     | ○    |
| 4    | 変更の入口（追加・統廃合・改定）            | ○    |
| 5    | 関連ドキュメント導線（SAC/STS/OPD/OPR/ADR） | ○    |

補足:

- `nfr-index` 自体は詳細要求本文を持たない。
- 詳細要求は各 `nfr-<category>` 分冊に記述する。

## 6. 記述ガイド

### 6.1. 概要（対象範囲・管理方針）

生成する本文の見出しは **## 1. 概要（対象範囲・管理方針）**

- NFR を分冊管理する目的（探索性、保守性、レビュー効率）を 1〜3段落で示す。
- 本書が入口であり、要求本文は分冊が SSOT であることを明示する。

### 6.2. カテゴリ一覧（8カテゴリ）

生成する本文の見出しは **## 2. カテゴリ一覧（8カテゴリ）**

- 次の8カテゴリを固定で列挙する。
  - 信頼性、可用性、保守性、完全性、機密性・安全性、性能、運用、操作性
- カテゴリごとに「目的」と「代表指標」を短く示す。

### 6.3. 分冊ドキュメント一覧

生成する本文の見出しは **## 3. 分冊ドキュメント一覧（ID/参照先/Owner）**

- 各カテゴリの分冊ID、参照先、更新責任、備考を表形式で記載する。
- 参照先はリポジトリ相対パスかIDで一意に辿れる形にする。

### 6.4. 変更の入口

生成する本文の見出しは **## 4. 変更の入口（追加・統廃合・改定）**

- 分冊の追加・削除・統合・分割時の更新手順を記載する。
- 完了条件（リンク有効、重複排除、テスト導線更新）を明示する。

### 6.5. 関連ドキュメント導線

生成する本文の見出しは **## 5. 関連ドキュメント導線（SAC/STS/OPD/OPR/ADR）**

- カテゴリごとに検証（SAC/STS）・運用（OPD/OPR）・判断記録（ADR）への導線を置く。
- 導線がない場合は `（なし）` を明示する。

## 7. 禁止事項

| 禁止事項                                 | 理由                             |
| ---------------------------------------- | -------------------------------- |
| `nfr-index` にカテゴリ詳細要求を記述する | 分冊との重複・不整合を招くため   |
| 8カテゴリ定義を欠落させる                | 網羅性と比較可能性が低下するため |
| 参照先が不明なIDだけを並べる             | 追跡不能になるため               |
| 合否判定不可の曖昧表現を残す             | 要件として検証不能になるため     |

## 8. サンプル

注：以下はルール文書内の例示です。生成する `nfr-index` では `## 1...` から始まります。

```yaml
---
id: nfr-index
type: architecture
title: 非機能要件: インデックス
status: draft
based_on: []
supersedes: []
---
```

### 8.1. 概要（対象範囲・管理方針）

本書は非機能要件をカテゴリ別に分冊管理するための入口である。
要求本文の正本は各カテゴリ分冊に置き、重複記述を避ける。

### 8.2. カテゴリ一覧（8カテゴリ）

| カテゴリ       | 目的                   | 代表指標                    |
| -------------- | ---------------------- | --------------------------- |
| 信頼性         | 障害抑止と誤動作防止   | 障害件数、失敗率            |
| 可用性         | 利用可能性の維持       | 稼働率、RTO/RPO             |
| 保守性         | 変更容易性と復旧容易性 | MTTR、変更リードタイム      |
| 完全性         | 正確性・改ざん防止     | 整合性違反件数、監査証跡率  |
| 機密性・安全性 | 不正利用防止           | 権限逸脱件数、脆弱性対応SLA |
| 性能           | 応答性・処理能力       | P95/P99、RPS                |
| 運用           | 監視・手順・継続運用   | アラート検知率、復旧達成率  |
| 操作性         | 使いやすさ・誤操作防止 | タスク完了率、誤操作率      |

### 8.3. 分冊ドキュメント一覧（例）

| ID                  | 参照先                                    | Owner    | 備考               |
| ------------------- | ----------------------------------------- | -------- | ------------------ |
| nfr-reliability     | `docs/ja/handbook/nfr-reliability.md`     | QA/Dev   | 信頼性要件         |
| nfr-availability    | `docs/ja/handbook/nfr-availability.md`    | Ops      | 可用性要件         |
| nfr-maintainability | `docs/ja/handbook/nfr-maintainability.md` | Dev/Ops  | 保守性要件         |
| nfr-integrity       | `docs/ja/handbook/nfr-integrity.md`       | Dev/QA   | 完全性要件         |
| nfr-security-safety | `docs/ja/handbook/nfr-security-safety.md` | Security | 機密性・安全性要件 |
| nfr-performance     | `docs/ja/handbook/nfr-performance.md`     | Dev      | 性能要件           |
| nfr-operations      | `docs/ja/handbook/nfr-operations.md`      | Ops      | 運用要件           |
| nfr-usability       | `docs/ja/handbook/nfr-usability.md`       | UX/QA    | 操作性要件         |

## 9. 生成 AI への指示テンプレート

生成 AI に `nfr-index` を作成させるときの指示テンプレートは [`nfr-index-instruction.md`](../instructions/nfr-index-instruction.md) を参照してください。
