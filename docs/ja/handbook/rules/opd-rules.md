---
id: opd-rules
title: 運用方針・設計 作成ルール
type: rulebook
status: draft
---

Operations Policy and Design (OPD) Documentation Rules

本ドキュメントは、運用方針・設計ドキュメント（`opd-index` / `opd-<term>`）を統一形式で記述するためのルールです。
切替後の恒常運用を「あるべき姿」として定義し、運用品質（SLO/SLA・責任分界・統制）を SSOT 化するための内容を定義します。

## 1. 全体方針

`opd-index`（必要に応じて `opd-<term>`）は、恒常運用の方針と統制基準を一元化する SSOT とする。

- 運用の範囲・前提を明示し、責務境界を曖昧にしない
- SLO/SLA/KPI を合否判定可能な形で定義する
- 体制・責任分界（RACI/当番/エスカレーション）を明確化する
- 監視・障害対応・変更管理・バックアップ方針を統一する
- 問い合わせ運用と関連ドキュメント導線を維持する

### 1.1. index / term 分割方針

- 原則 `opd-index` を作成し、運用方針・設計の入口（SSOT）とする
- `opd-<term>` は運用ドメイン（監視/障害対応/問い合わせ/バッチ/権限等）が独立し、分冊した方が維持しやすい場合に追加する
- `opd-<term>` を追加する場合でも、共通の統制（SLO/SLA/KPI、責任分界、変更管理レベル、バックアップ原則など）は `opd-index` を正とする
- `opd-<term>` では、原則として **`opd-index` との差分（補足・具体化・例外）** を記述し、全体方針の重複記載を避ける

## 2. 位置づけ

`opd-index` / `opd-<term>` と他ドキュメントの関係を示します。必要に応じて Mermaid を使用してよい。

- `opd-index` / `opd-<term>`：恒常運用の方針・統制の SSOT（SLO/SLA・責任分界・統制基準を含む）
- `opr-index` / `opr-<term>`：運用手順・Runbook（実行手順の詳細）
  - OPD は「方針と統制（あるべき姿・判断基準）」、OPR は「手順と証跡（再現可能な作業）」を責務とする

## 3. ファイル命名・ID規則

- `id` は `opd-index` または `opd-<term>`（kebab-case。例: `opd-monitoring`）。
- ファイル名はプロジェクト内で一意になるように命名する（日本語可）。
  - 例: `運用方針・設計.md` / `運用方針・設計-監視.md`
  - 並び順が必要な場合は接頭辞の番号付与（例: `opd-010-...`）を **任意** で用いてよい
- `<term>` は用語集(GL)の論理名キー（英小文字kebab-case）を用いる（表示名は title / ファイル名で日本語を使用してよい）。

## 4. 推奨 Frontmatter 項目

### 4.1. 設定内容

Frontmatter は共通スキーマに従います（参照: [docs/shared/schemas/spec-frontmatter.schema.yaml](../../../shared/schemas/spec-frontmatter.schema.yaml) / [meta-document-metadata-rules.md](meta-document-metadata-rules.md)）。

| 項目       | 説明                                         | 必須 |
| ---------- | -------------------------------------------- | ---- |
| id         | OPD ID（`opd-index` または `opd-<term>`）    | ○    |
| type       | `operations` 固定                            | ○    |
| title      | 運用方針・設計: <対象名>                     | ○    |
| status     | `draft` / `ready` / `deprecated`             | ○    |
| based_on   | 根拠となる仕様ID（ID配列。未指定は `[]` 可） | 任意 |
| supersedes | 置き換え関係（ID配列。未指定は `[]` 可）     | 任意 |

### 4.2. 推奨ルール

- `based_on` には恒常運用設計判断に直接利用した成果物（例: `nfr-*` / `sac-*` / `br-*` / `issue-*`）のみ列挙する
- OPD は OPR を参照してよいが、`based_on` には **運用判断の根拠** のみを載せる（手順書は導線で扱う）
- `based_on` / `supersedes` は ID 配列（未指定は `[]` 可）

## 5. 本文構成（標準テンプレ）

`opd-index` / `opd-<term>` は以下の見出し構成を **順序固定** で配置します。

| 番号 | 見出し                                             | 必須 |
| ---- | -------------------------------------------------- | ---- |
| 1    | 概要（`index` / `<term>`）                         | ○    |
| 2    | 運用の範囲・前提                                   | ○    |
| 3    | SLO・SLA・KPI                                      | ○    |
| 4    | 体制・責任分界（RACI・当番・エスカレーション）     | ○    |
| 5    | 監視・アラート方針（指標・閾値・通知先・初動）     | ○    |
| 6    | 障害対応方針（優先度・停止判断・周知）             | ○    |
| 7    | 変更管理（リリース・設定変更・承認・ロールバック） | ○    |
| 8    | バックアップ・リストア方針（RTO/RPO）              | ○    |
| 9    | 権限・アカウント運用（棚卸し・監査ログ）           | ○    |
| 10   | 定期運用方針（バッチ・点検）                       | ○    |
| 11   | 問い合わせ運用方針（窓口・分類・SLA）              | ○    |
| 12   | 関連ドキュメント導線（`opr` 等）                   | ○    |

## 6. 記述ガイド

### 6.1. 概要（`index` / `<term>`）

生成する本文の見出しは **## 1. 概要（`index` / `<term>`）**

- 何を運用方針として定義するかを 1〜3 行で示す
- `opd-index` が恒常運用の SSOT であることを明示する
- `opd-<term>` の場合は「`opd-index` の差分・補足である」ことを 1 行で明示する

### 6.2. 運用の範囲・前提

生成する本文の見出しは **## 2. 運用の範囲・前提**

- 対象システム、対象業務、対象時間帯、非対象範囲を明記する
- 前提制約（法令/契約/セキュリティ/組織体制）を明記する

### 6.3. SLO・SLA・KPI

生成する本文の見出しは **## 3. SLO・SLA・KPI**

- 可用性/応答時間/一次応答などの目標を定量で定義する
- 判定期間・測定方法・証跡・判定者を明記する

推奨フォーマット（表）:

| 指標 | 目標値 | 測定期間 | 測定方法 | 証跡 | 判定者 |
| ---- | ------ | -------- | -------- | ---- | ------ |

### 6.4. 体制・責任分界（RACI・当番・エスカレーション）

生成する本文の見出しは **## 4. 体制・責任分界（RACI・当番・エスカレーション）**

- RACI、当番体制、連絡系統を明記する
- 優先度別のエスカレーション条件（いつ・誰が・どこへ）を明記する

推奨フォーマット（表）:

| 対象 | R   | A   | C   | I   | 備考 |
| ---- | --- | --- | --- | --- | ---- |

### 6.5. 監視・アラート方針（指標・閾値・通知先・初動）

生成する本文の見出しは **## 5. 監視・アラート方針（指標・閾値・通知先・初動）**

- 監視対象、閾値、通知先、初動ルールを明記する
- 誤検知/検知漏れ対策の運用方針を必要に応じて記載する

推奨フォーマット（表）:

| 監視対象 | 指標/閾値 | 通知先 | 初動（誰が何をするか） | 備考 |
| -------- | --------- | ------ | ---------------------- | ---- |

### 6.6. 障害対応方針（優先度・停止判断・周知）

生成する本文の見出しは **## 6. 障害対応方針（優先度・停止判断・周知）**

- 優先度分類（P1/P2/P3 等）と停止判断条件を明記する
- 周知対象・手段・タイミングを明記する

推奨フォーマット（表）:

| 優先度 | 例  | 目標（一次応答/復旧） | 停止判断 | 周知 |
| ------ | --- | --------------------- | -------- | ---- |

### 6.7. 変更管理（リリース・設定変更・承認・ロールバック）

生成する本文の見出しは **## 7. 変更管理（リリース・設定変更・承認・ロールバック）**

- 変更種別、承認フロー、実施条件（時間帯/凍結期間等）を明記する
- ロールバック条件と承認者を明記する

### 6.8. バックアップ・リストア方針（RTO/RPO）

生成する本文の見出しは **## 8. バックアップ・リストア方針（RTO/RPO）**

- バックアップ方式、保管先、保持期間を明記する
- RTO/RPO と復旧手順参照先を明記する（詳細手順は OPR に寄せる）

### 6.9. 権限・アカウント運用（棚卸し・監査ログ）

生成する本文の見出しは **## 9. 権限・アカウント運用（棚卸し・監査ログ）**

- 権限付与/剥奪ルール、棚卸し周期、監査ログ方針を明記する
- 緊急権限（ブレークグラス）の管理条件を明記する

### 6.10. 定期運用方針（バッチ・点検）

生成する本文の見出しは **## 10. 定期運用方針（バッチ・点検）**

- 定期バッチ、定期点検、実施責任者、証跡を明記する
- 未実施時のエスカレーション方針を明記する

### 6.11. 問い合わせ運用方針（窓口・分類・SLA）

生成する本文の見出しは **## 11. 問い合わせ運用方針（窓口・分類・SLA）**

- 受付窓口、分類ルール、一次対応 SLA を明記する
- 連携先（開発/業務/運用）への引き継ぎ条件を明記する

### 6.12. 関連ドキュメント導線（`opr` 等）

生成する本文の見出しは **## 12. 関連ドキュメント導線（`opr` 等）**

- `opr-index` への導線を **必ず** 記載する
- `opr-<term>` がある場合は、該当する手順への導線を併記する
- 分冊がない場合でも `（本書のみ）` または `（なし）` を明記する
- 移行ドキュメント（`mip-*` / `mtp-*` / `cop-*` / `otp-*`）は必要時のみ参考情報として記載する

推奨フォーマット（表）:

| 種別 | ドキュメントID | 目的 | 備考 |
| ---- | -------------- | ---- | ---- |

## 7. 禁止事項

| 禁止事項                                             | 理由                                         |
| ---------------------------------------------------- | -------------------------------------------- |
| SLO/SLA/KPI を定量定義せず曖昧語で記述する           | 判定基準が成立しないため                     |
| 責任分界（RACI/当番/エスカレーション）を省略する     | 障害時の判断遅延・責任不明確を招くため       |
| 監視閾値/通知先/初動ルールを未記載にする             | 初動遅延や見落としの原因となるため           |
| 変更管理の承認/ロールバック条件を未定義にする        | 変更統制が崩壊するため                       |
| バックアップ/リストア方針に RTO/RPO 観点を含めない   | 復旧計画の実効性が担保できないため           |
| 関連ドキュメント導線（`opr` 等）を省略する           | 参照先が分散し、運用時に判断を誤るため       |
| 手順（コマンド/チェックリスト）を OPD に大量記載する | OPR と二重管理になり、更新不整合を起こすため |

## 8. サンプル（抜粋例）

注：以下はルール文書内の例示です。生成する `opd-index` / `opd-<term>` では `## 1...` から始まります。

### 8.1. サンプル: opd-index（全体）

```yaml
---
id: opd-index
type: operations
title: 運用方針・設計: 全体
status: draft
based_on: []
supersedes: []
---
```

#### 8.1.1. 概要（index）

恒常運用の品質基準と統制方針を定義し、運用判断の基準を一元化する（本書がSSOT）。

#### 8.1.2. SLO・SLA・KPI

| 指標        | 目標値       | 測定期間 | 測定方法                 | 証跡         | 判定者         |
| ----------- | ------------ | -------- | ------------------------ | ------------ | -------------- |
| 可用性      | 99.9%以上    | 月次     | 監視SaaSの稼働率集計     | 監視レポート | 運用責任者     |
| API応答時間 | p95 < 300ms  | 週次     | APMのp95集計             | APMレポート  | 運用責任者     |
| 一次応答    | P1: 30分以内 | 月次     | チケット初回応答時刻集計 | 問合せ台帳   | サポート責任者 |

#### 8.1.3. 体制・責任分界（RACI・当番・エスカレーション）

| 対象          | R（実行） | A（責任） | C（相談） | I（共有） | 備考           |
| ------------- | --------- | --------- | --------- | --------- | -------------- |
| 監視/一次対応 | Ops       | Ops Lead  | Dev Lead  | PO        | P1は即時連絡   |
| 障害復旧      | Ops       | Ops Lead  | Dev       | Biz/PO    | 復旧後に報告   |
| 仕様判断      | Biz       | PO        | Ops/Dev   | -         | 停止判断を含む |

#### 8.1.4. 関連ドキュメント導線（`opr` 等）

| 種別 | ドキュメントID | 目的                     | 備考       |
| ---- | -------------- | ------------------------ | ---------- |
| 手順 | opr-index      | 運用手順の全体構成       | 必須       |
| 手順 | opr-incident   | 障害一次対応/復旧手順    | 該当時     |
| 移行 | otp-index      | ハイパーケア体制（参考） | 必要時のみ |

### 8.2. サンプル: opd-monitoring（監視の term）

```yaml
---
id: opd-monitoring
type: operations
title: 運用方針・設計: 監視
status: draft
based_on: []
supersedes: []
---
```

#### 8.2.1. 概要（monitoring）

監視・アラートの方針を `opd-index` の差分として定義する（指標・閾値・通知先・初動の具体化）。

#### 8.2.2. 監視・アラート方針（指標・閾値・通知先・初動）

| 監視対象 | 指標/閾値             | 通知先 | 初動（誰が何をするか）                       | 備考             |
| -------- | --------------------- | ------ | -------------------------------------------- | ---------------- |
| API      | 5xx率 > 1%（5分）     | #ops   | Ops当番がダッシュボード確認→切り分け開始     | 誤検知は閾値調整 |
| DB       | レプリカ遅延 > 30s    | #ops   | Ops当番が負荷/ジョブ確認→Devへ連絡（P2以上） |                  |
| Batch    | 予定時刻+15分で未完了 | #ops   | Ops当番がジョブ状態確認→再実行可否を判断     | 詳細は opr-batch |

#### 8.2.3. 関連ドキュメント導線（`opr` 等）

| 種別 | ドキュメントID | 目的                     | 備考   |
| ---- | -------------- | ------------------------ | ------ |
| 手順 | opr-monitoring | アラート対応の手順・証跡 | 必須   |
| 手順 | opr-batch      | バッチ失敗時の再実行手順 | 該当時 |

### 8.3. サンプル: opd-incident-management（障害対応の term）

```yaml
---
id: opd-incident-management
type: operations
title: 運用方針・設計: 障害対応
status: draft
based_on: []
supersedes: []
---
```

#### 8.3.1. 概要（incident-management）

障害対応の優先度、停止判断、周知方針を `opd-index` の差分として具体化する。

#### 8.3.2. 障害対応方針（優先度・停止判断・周知）

| 優先度 | 例                    | 目標（一次応答/復旧） | 停止判断                      | 周知                          |
| ------ | --------------------- | --------------------- | ----------------------------- | ----------------------------- |
| P1     | 全ユーザ影響/決済不可 | 30分/4h               | Ops Leadが即時→PO承認で停止可 | 全ユーザ（ステータス/メール） |
| P2     | 一部機能停止          | 2h/1d                 | Ops Lead判断、POへ共有        | 影響範囲のみ                  |
| P3     | 軽微/回避あり         | 1d/次リリース         | 停止しない                    | 原則なし                      |

#### 8.3.3. 関連ドキュメント導線（`opr` 等）

| 種別 | ドキュメントID | 目的                         | 備考 |
| ---- | -------------- | ---------------------------- | ---- |
| 手順 | opr-incident   | 障害切り分け/復旧/報告の手順 | 必須 |

### 8.4. サンプル: opd-access-control（権限運用の term）

```yaml
---
id: opd-access-control
type: operations
title: 運用方針・設計: 権限・アカウント
status: draft
based_on: []
supersedes: []
---
```

#### 8.4.1. 概要（access-control）

権限付与/剥奪、棚卸し、監査ログ、緊急権限を `opd-index` の差分として定義する。

#### 8.4.2. 権限・アカウント運用（棚卸し・監査ログ）

- 付与/剥奪はチケット起票を必須とし、承認者はOps Leadとする
- 棚卸しは月次で実施し、結果は監査ログ保管領域に保存する
- ブレークグラスは2名承認 + 24時間で自動失効（原則）

#### 8.4.3. 関連ドキュメント導線（`opr` 等）

| 種別 | ドキュメントID     | 目的                           | 備考 |
| ---- | ------------------ | ------------------------------ | ---- |
| 手順 | opr-access-control | アカウント付与/剥奪/棚卸し手順 | 必須 |

## 9. 生成 AI への指示テンプレート

生成 AI に `opd-index` / `opd-<term>` を作らせるときの指示テンプレートは `opd-instruction.md` を参照してください。
