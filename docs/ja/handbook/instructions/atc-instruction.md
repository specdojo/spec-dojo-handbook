# 受入テストカタログ 対象別 作成の指示テンプレート

以下のルールに従って、**受入テストカタログ-対象別（`atc-<term>`）** を 1 ファイル作成してください。出力は **Markdown** とします。

- `atc-<term>` は **対象固有の情報のみ**を記述し、共通ルールは `atc-index` を参照します（重複記述しない）。
- 受入テストの目的は「関係者が受け入れ可否を判断できること」です。
- ケースは「表の1行＝1受入シナリオ」とし、手順と期待値は **合否判定可能**な粒度で簡潔に書きます。
- クリック列挙・画面要素の細部・大量データ列挙は避け、必要な詳細は **実施手順書／実施記録** 側へ寄せます。
- 環境・データ・外部依存の前提は受入判断の再現性に直結するため、対象ごとの差分は必ず明記します（共通は `atc-index`）。

## 事前に与えられる情報（入力）

次の情報が与えられている前提で、それに整合する `atc-<term>` を生成してください（不明な場合は「未確定」として明記してよい）。

- 対象システム/プロダクトの概要
- 上位方針: `tsp-index`
- `atc-index`（共通方針）
- 対象 `term` の受入判断単位、責務、境界
- 参照すべき上位仕様（`br-*` / `bac-*` / `spec-*` / `ac-*` / `nfr-*` 等）
- 環境/データ/外部依存の前提（受入環境、代表構成、外部接続）
- 実施記録/レポート/ログ での証跡参照先

## 出力フォーマット（必須）

### YAML Frontmatter（必須）

先頭に YAML Frontmatter を付与し、以下の形式で記述してください（`id` / `type` / `title` / `status` は必須、`type` は `test` 固定）。

```yaml
---
id: atc-<term>
type: test
title: 受入テストカタログ: <対象名>
status: draft # draft / ready / deprecated
part_of: []
based_on:
 - tsp-index
 - atc-index
supersedes: []
---
```

- `based_on` には **最低限** `tsp-index` と `atc-index` を含めてください。
- 対象固有の根拠（`br-*` / `bac-*` / `spec-*` / `ac-*` / `nfr-*` 等）は、本文の **トレース表** に集約します。

### 本文の見出し（必須・順序固定）

本文は次の見出し（日本語）をこの順序で必ず含めてください。

1. 概要（`<term>`）
2. 受入の責務（成果/完了条件）
3. 対象外
4. 環境/データ/外部依存
5. トレース
6. 受入観点とケース

## 記述ルール（重要）

### スコープ（書く / 書かない）

- 書く: 対象固有の受入判断単位・責務・境界・前提、観点×条件＝ケース、トレース、証跡
- 書かない: `atc-index` にある共通方針の再掲、細かい操作列挙、個別の詳細手順

### 追跡可能性（トレース）

- 本ドキュメントの **トレース表が一次情報（SSOT）** です。
- 観点/ケース表では **仕様IDを直書きせず** `TR-xx` のみ参照します。

### ケース/具体値の扱い

- ケース表の 1 行は 1 受入シナリオ（条件×期待値が一意）とします。
- 具体値や詳細手順は最小限に抑え、必要な詳細は実施記録へ委譲します。

## 各セクションの書き方

### 1. 概要（`<term>`）

- 対象が何であり、どの受入判断単位を本カタログで扱うかを 1〜3 行で書く。
- `atc-index` の分割基準に従い、過分割／肥大化を避ける。

### 2. 受入の責務（成果/完了条件）

- 「この対象が受入で何を保証すべきか（受入判断の責務）」を **成果が分かる動詞** で 3〜7 個程度示す。
- 重要分岐（代表失敗/復帰/やり直し等）も含める。

### 3. 対象外

- 対象外は理由と代替レベル/手段を併記する（例: 「xxx（理由: yyy、代替: ST）」）。
- `atc-index` の対象外と矛盾しない。

### 4. 環境/データ/外部依存

- 環境（代表構成、版/タグの扱い）を明記する。
- データ（データセットID、初期化/後始末）を明記する。
- 外部依存（sandbox/疑似、確認手段）を明記する。

### 5. トレース

- 仕様IDに対応する **トレース表** を作成する。
- 各行に `trace_key`（`TR-01` 形式）を付与し、観点/ケース表では `TR-xx` のみ参照する。

### 6. 受入観点とケース

- 観点（見出し）→ 意図 → 条件・ケース表の順で構成する。
- `case_id` は `<level>-<term>-<perspective_key>-<nnn>` を推奨し、原則変更しない（`level` は `at`）。
- `条件` は「入力/状態/環境/経路」で表現する（必要な要素のみ）。
- `手順（最小）` は高位の最小手順に留め、クリック列挙は禁止する。
- `期待値` は判定可能に書く（画面・帳票・通知・ログ相関ID等の観測点を含める）。

## ケース表の共通カラム（必須）

`atc-index` の定義に従い、以下のカラムを **順序固定** で使用します。

- **必須カラム**: `case_id` / `条件` / `手順（最小）` / `期待値`
- **推奨カラム**: `観測点（アサーション）` / `環境/依存` / `トレース` / `優先度` / `実施形態` / `証跡`

## 最終チェック（自己検査）

- `id: atc-<term>` / `type: test` / `status` が設定されている
- `based_on` に `tsp-index` と `atc-index` が入っている
- 見出しが指定順序で揃っている（欠落なし）
- トレース表が SSOT になっている（`TR-xx` 参照で統一）
- ケース表のカラムが `atc-index` と一致している
