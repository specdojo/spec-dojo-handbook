# 内部結合テスト設計 − 個別設計（ITD-D）作成の指示テンプレート

以下のルールに従って、**内部結合テスト設計 − 個別設計（`itd-<term>`）** を 1 ファイル作成してください。出力は Markdown とします。

- ITD-D はテストコード直前の設計成果物です。
- 1ファイル = 1内部結合対象を原則とします。
- 「何を保証するか」は ITS-D、「どう切り分けて試すか」は ITD-D で表現してください。

## 入力情報

- 対象連携（連携元/連携先/連携方式/タイミング）
- 対応する ITS-D
- 連携上の主要観点（正常/異常/整合/監査など）
- 実行環境と自動化方針（CI、初期化、後処理）

## 出力フォーマット（必須）

### YAML Frontmatter（必須）

```yaml
---
id: itd-<term>
type: test
title: 内部結合テスト設計: <対象名>
status: draft
part_of:
  - itd-index
based_on:
  - its-<term>
supersedes: []
---
```

### 本文見出し（必須・順序固定）

1. 概要
2. 対象連携の整理
3. テスト観点とケース構成
4. ケース一覧（設計）
5. テストデータ設計
6. 実行・自動化方法
7. 判定基準
8. 対象外
9. メモ / 将来課題

## 記述ルール（必須）

### 1) 概要

- 対象連携を1件に絞り、ITS-Dとの対応を明示

### 2) 対象連携の整理

- 連携元/連携先/連携方式/実行タイミング/対応仕様を表で整理
- 実装名・物理名は書かない

### 3) テスト観点とケース構成

- ITS-D観点をケース群へ分解する方針を示す

### 4) ケース一覧（設計）

- 1行=1ケース
- `ケースID / 観点ID / 前提 / 入力条件 / 期待結果` を基本カラムとする
- 値の詳細は最小限にする

### 5) テストデータ設計

- データ種別ごとに設計方針を簡潔に記述

### 6) 実行・自動化方法

- 実行手段・ツール・実行場所・前後処理を明示

### 7) 判定基準

- 機能/状態/例外など観点別に合格条件を判定可能に記述

### 8) 対象外

- 対象外項目と理由を列挙

### 9) メモ / 将来課題

- 追加余地や改善点のみ簡潔に記載

## 禁止事項

- SQL全文、JSON全文
- 実装クラス名・関数名
- 値の全網羅列挙
- コード断片の貼り付け

## 最終チェック（自己検査）

- Frontmatter に `id/type/title/status/part_of/based_on` が揃っている
- 見出し順が固定順序と一致している
- ケース一覧が設計粒度で書かれている
- 実装依存の詳細を含んでいない
