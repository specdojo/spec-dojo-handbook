# テスト戦略・方針 概要 作成の指示テンプレート

以下のルールに従って、**テスト戦略・方針-概要（`tsp-index`）** を 1 ファイル作成してください。出力は **Markdown** とします。

- `tsp-index` は全テストレベルの共通方針を定義する文書です（SSOT）。
- 個別のレベル詳細は `*c-index`、対象別の観点→条件→ケース化は `*c-<term>` に委譲してください。
- 曖昧表現（十分/適切/問題ない）は避け、合否判定できる記述にしてください。
- 実装依存（SQL全文、クラス名、設定値の羅列、クリック手順の逐語列挙）は書かないでください。

## 事前に与えられる情報（入力）

次の情報が与えられている前提で、それに整合する `tsp-index` を生成してください（不明な場合は「未確定」として明記してよい）。

- 対象システム/プロジェクト名
- 主要業務と主要外部I/F
- 参照すべき仕様ID（`bac-*` / `nfr-*` / `sac-*` / `adr-*` など）
- 既存のテストレベル運用や体制情報

## 出力フォーマット（必須）

### YAML Frontmatter（必須）

先頭に YAML Frontmatter を付与し、以下の形式で記述してください（`id` / `type` / `title` / `status` は必須、`type` は `test` 固定）。

```yaml
---
id: tsp-index
type: test
title: テスト戦略・方針: 概要（<対象名>）
status: draft # draft / ready / deprecated
part_of: []
based_on: []
supersedes: []
---
```

### 本文の見出し（必須・順序固定）

本文は次の見出し（日本語）をこの順序で必ず含めてください。

1. 概要
2. テストレベル一覧（目的/範囲/体制）と観点/条件設計の共通原則
3. スコープ（対象/対象外）
4. テスト環境・テストデータ（スタブ/モック方針を含む）
5. 入口／出口条件（品質ゲート）
6. 自動化・回帰方針（任意だが推奨）
7. 不具合管理方針（任意）
8. 品質メトリクス（任意）
9. メモ / 将来課題

## 記述ルール（重要）

### 1. 概要

- 1〜3文で「何の品質を、どの範囲に対して、どのように担保するか」を書く。
- `based_on` に列挙した仕様と矛盾しない内容にする。

### 2. テストレベル一覧（目的/範囲/体制）と観点/条件設計の共通原則

- テストレベル一覧は表で記述し、最低限 `テストレベル` / `目的` / `範囲` / `実施体制・備考` を含める。
- 可能なら `保証すること（合格の意味）` と `やらないこと（非目的）` を追加して責任分界を明確にする。
- 各レベルで「何をそのレベルで確認し、何を下位/上位へ委譲するか」を明記する。
- 観点/条件設計の共通原則は表で記述し、`定義粒度` / `分類` / `判定軸` の3行を必須にする。
- 共通原則は TSP で定義し、レベル共通の詳細は `*c-index`、対象別の具体化は `*c-<term>` に委譲することを明記する。

### 3. スコープ（対象/対象外）

- `対象（含む）` と `対象外（除外）` を必ず記載する。
- 対象外には理由（契約委譲、運用切り分け、リスク受容など）を添える。

### 4. テスト環境・テストデータ（スタブ/モック方針を含む）

- 環境区分と用途、外部I/Fの扱い（実接続/スタブ/モック）を定義する。
- データ方針（匿名化、代表データ量、再現性）を記載する。
- 外部I/Fの対象範囲（導通/契約/データ内容/業務一貫性）をどこまで検証するか明記する。
- スタブ/モック選択基準（どのレベルで何を実接続に寄せるか）を明記する。

### 5. 入口／出口条件（品質ゲート）

- テストレベルごとに入口条件（開始条件）と出口条件（完了条件）を合否判定できる形で記述する。
- 出口条件には未解決不具合の扱い（重大度別の許容）を含める。
- 可能なら NFR/SAC との接続を明記する。
- 可能な限り表形式（`フェーズ/テストレベル` / `入口条件` / `出口条件` / `エビデンス`）で記述する。

### 6. 自動化・回帰方針（任意だが推奨）

- どこを自動化し、どこを手動で補うかを明確にする。
- 変更影響のある領域の回帰方針を定義する。

### 7. 不具合管理方針（任意）

- 重大度定義、収束基準、既知不具合の扱いを必要に応じて記載する。

### 8. 品質メトリクス（任意）

- 必要最小限のメトリクス（Pass率、重大不具合件数、NFR達成状況など）を定義する。

### 9. メモ / 将来課題

- 未確定前提、将来追加したい試験、合意待ち事項を箇条書きで記載する。

## 禁止事項

- 実装依存情報（物理テーブル名・物理カラム名・SQL全文・クラス名・設定値）を書かない。
- 逐語的な操作手順や個別ケースの大量列挙を書かない（下位文書に委譲する）。
- 曖昧表現（`十分` / `適切` / `問題ない` など）を書かない。
- 前提が示されない数値条件を単独で記載しない。

## 最終チェック（自己検査）

- `id: tsp-index` / `type: test` / `status` が設定されている
- `part_of` / `based_on` / `supersedes` が Frontmatter にある
- 見出しが指定順序で揃っている（欠落なし）
- セクション2に「テストレベル一覧」と「観点/条件設計の共通原則」が含まれている
- セクション3〜5でスコープ・環境/データ・品質ゲートが判定可能に書かれている
- 具体化先（`*c-index` / `*c-<term>`）への責務分担が明記されている
- 曖昧表現がなく、合否判定可能な記述になっている
