# 全体概念データフロー図（現状）

## プロセスグループ概要

| プロセスグループ | 主な業務                                 | 業務目的                                           |
| ---------------- | ---------------------------------------- | -------------------------------------------------- |
| 調達             | 発注・受入・在庫管理                     | 売るための商品を確保する。商いの原資をつくる。     |
| 販売             | 商品の提示・販売受付・代金受領・商品引渡 | 商品をお客様に提供し、対価のやり取りを成立させる。 |
| 会計             | レジ締め・売上記録・仕入支払い・帳簿管理 | お金の流れを正確に把握し、商いの継続を可能にする。 |

## 外部主体と物理保管に着目した概要フロー

凡例は[こちら(cdfd-mermaid-rules#6.凡例)](../../../handbook/ja/rules/cdfd-mermaid-rules.md#6-凡例)を参照してください。

```mermaid
flowchart LR

  %% プロセスグループ
  subgraph 調達["調達"]
    調達プロセス群("調達プロセス群")
  end

  subgraph 販売["販売"]
    販売プロセス群("販売プロセス群")
  end

  subgraph 会計["会計"]
    会計プロセス群("会計プロセス群")
  end

  %% 外部主体
  仕入先[仕入先]
  顧客[顧客]

  %% 物理保管
  バックヤード([バックヤード])
  売り場棚([売り場棚])
  レジ([レジ])
  金庫([金庫])
  銀行口座([銀行口座])
  仕入先口座([仕入先口座])

  %% 連関
  仕入先 ==>|納入商品| 調達プロセス群 ==>|在庫商品| バックヤード
  バックヤード ==>|在庫商品| 調達プロセス群 ==>|販売商品| 売り場棚
  売り場棚 ==>|販売商品| 販売プロセス群 ==>|"販売済商品<br>掛売商品"| 顧客
  顧客 ==>|売上金| 販売プロセス群　==>|レジ現金| レジ
  レジ ==>|釣銭| 販売プロセス群 ==>|釣銭| 顧客
  顧客 ==>|"現金<br>（つけ回収）"| 会計プロセス群
  レジ ==>|レジ現金| 会計プロセス群 ==>|保管金| 金庫
  金庫 ==>|保管金| 会計プロセス群 ==>|銀行預金| 銀行口座
  銀行口座 ==>|銀行預金| 会計プロセス群 ==>|支払金| 仕入先口座
```

## データストアに着目した概要フロー

```mermaid
flowchart LR

  %% プロセスグループ
  subgraph 調達["調達"]
    調達プロセス群("調達プロセス群")
  end

  subgraph 販売["販売"]
    販売プロセス群("販売プロセス群")
  end

  subgraph 会計["会計"]
    会計プロセス群("会計プロセス群")
  end

  %% データストア
  商品一覧表[(商品一覧表)]
  仕入台帳[(仕入台帳)]
  在庫台帳[(在庫台帳)]
  売上台帳[(売上台帳)]
  つけ帳[(つけ帳)]
  レジ記録[(レジ記録)]
  支払管理表[(支払管理表)]
  会計帳簿[(会計帳簿)]

  %% 連関
  商品一覧表 -->|商品情報| 調達プロセス群
  在庫台帳 -->|在庫商品数量<br>販売商品数量| 調達プロセス群 -->|在庫商品増減数量| 在庫台帳
  仕入台帳 -->|仕入仕掛り数量| 調達プロセス群
  調達プロセス群 -->|仕入発注数量| 仕入台帳
  仕入台帳 -->|確定仕入金額| 会計プロセス群

  在庫台帳 -->|販売商品数量| 販売プロセス群 -->|販売商品数量| 在庫台帳
  レジ記録 -->|釣銭金額| 販売プロセス群 -->|受領金額| レジ記録

  販売プロセス群 -->|掛売金額| つけ帳
  つけ帳 -->|未収金額| 会計プロセス群 -->|回収金額| つけ帳

  レジ記録 -->|"入金、出金、残高"| 会計プロセス群
  会計プロセス群 -->|販売情報| 売上台帳
  会計プロセス群 -->|支払情報| 支払管理表
  会計プロセス群 -->|売上情報| 会計帳簿
```
