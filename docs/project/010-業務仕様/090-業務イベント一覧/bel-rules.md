# 業務イベント一覧 （Business Event List）作成ルール

業務で発生する主要なイベント（販売、仕入、在庫調整など）を一覧で整理します。業務イベントを明確にすることで、BPS（業務プロセス仕様）や UI 仕様、BR（ビジネスルール）との対応付けを明確にします。また、複雑な業務イベントについては、個別の BEV ドキュメントで詳細を定義します。

## 1. メタデータ

| 項目       | 説明                              | 必須 |
| ---------- | --------------------------------- | ---- |
| id         | 業務イベント一覧ID (bel-xxx-xxxx) | ○    |
| type       | `domain` 固定                     | ○    |
| title      | 業務イベント一覧名                | ○    |
| status     | `draft`/`ready`/`deprecated`      | ○    |
| version    | バージョン（SemVer）              | 任意 |
| owners     | 担当者（メールアドレス）          | 任意 |
| tags       | タグ・分類                        | 任意 |
| supersedes | 置き換え関係（古仕様→新仕様）     | 任意 |

### 1.1 ID規約

- 業務イベント一覧IDは正規表現 `^bel-[a-z0-9-]+$` に合致する一意IDを用います。
- `type: domain` は業務ドメイン仕様であることを示します。

## 2. 記述ルール

- 業務イベントの一覧を **表形式** で整理します。
- イベント名は、業務ユーザーが理解できる **日本語** を用い、曖昧な動詞（「処理」「対応」など）だけに寄らないようにします。
- 「トリガー」は、イベントが発生する契機（誰が/何が/いつ）を短く書きます。
- 入力/出力は実装（DB・テーブル・API・UIコンポーネント等）に寄せず、概念レベルの業務情報として書きます。
- 仕様間（BPS／BR／UI／用語集）で名称の整合性を保ちます。

### 2.1 標準列の定義

| 列名           | 説明                                                                                                         |
| -------------- | ------------------------------------------------------------------------------------------------------------ |
| **イベントID** | イベントを一意に識別するID（例: `bev-xxx-xxxx`）。後工程（BPS/UI/BR/テスト）から参照される前提で付与します。 |
| **イベント名** | イベントの日本語名（例: 商品販売、仕入登録、在庫調整）。                                                     |
| **トリガー**   | 発生契機（例: 店員が会計を確定する、納品伝票を登録する、棚卸差異を確定する）。                               |
| **主な入力**   | イベント処理の判断/計算/記録に必要な入力（概念レベル）。                                                     |
| **主な出力**   | イベントの結果として生成/更新/通知される出力（概念レベル）。                                                 |

※ 列順は **イベントID → イベント名 → トリガー → 主な入力 → 主な出力** に統一します。

### 2.2 イベントIDの推奨

- 一覧ドキュメント自体の `id`（= bel-...）とは別に、一覧表の各行には **イベントID** を付与することを推奨します。
- イベントIDの推奨形式: `bev-<領域>-<短い英字>`（例: `bev-sale-checkout`）。
  - 既存プロジェクトの命名規約に合わせ、必要ならプレフィックスは調整します。

## 3. 禁止事項

| 項目                                   | 理由                         |
| -------------------------------------- | ---------------------------- |
| 物理テーブル名・物理カラム名・SQL全文  | 概念レベル逸脱               |
| 実装クラス/関数名・APIの実装詳細       | 実装依存で変更に弱い         |
| クリック手順など UI 操作の逐語列挙     | 一覧の可読性低下・変更に弱い |
| 曖昧な名詞（「その他」「適宜」）の多用 | 後工程で解釈が割れる         |

## 4. サンプル

### 4.1 メタデータ（front-matter YAML）

```yaml
---
id: bel-main
type: domain
title: 業務イベント一覧(main)
version: 0.1.0
status: draft
owners: []
tags: []
supersedes: []
---
```

### 4.2 業務イベント一覧（表）

| イベントID           | イベント名       | トリガー                   | 主な入力                       | 主な出力                               |
| -------------------- | ---------------- | -------------------------- | ------------------------------ | -------------------------------------- |
| bev-sale-checkout    | 会計確定（販売） | 店員が会計を確定する       | 商品明細、数量、顧客、支払情報 | 売上記録、在庫更新、つけ更新（該当時） |
| bev-procurement-recv | 納品登録（仕入） | 仕入先からの納品を登録する | 納品明細、仕入先、商品、数量   | 在庫更新、仕入記録                     |
| bev-stock-adjust     | 在庫調整         | 棚卸差異/破損を確定する    | 商品、現在庫数、差異理由       | 在庫更新、在庫調整記録                 |

## 5. 生成 AI への指示テンプレート

生成 AI に業務イベント一覧（BEL）を作らせるときは、以下のような指示を与えます。

> - 以下のルールに従って、**業務イベント一覧（Business Event List: BEL）** を 1 つ作成してください。出力は **Markdown** とします。
> - 対象は「一覧（表）」です。複雑なイベントの詳細手順や実装設計は書かず、イベントを網羅的に整理してください。
> - 禁止: 物理テーブル名・物理カラム名・SQL全文、実装クラス/関数名・API実装詳細、UIコンポーネント名、クリック手順など UI 操作の逐語列挙
> - 先頭に YAML Frontmatter を付与し、以下の形式で記述してください（不要な項目は省略可だが、`id` / `type` / `title` / `status` は必須）：
>
>   ```yaml
>   ---
>   id: bel-<英小文字とハイフンで構成したID> # 例: bel-main
>   type: domain
>   title: <業務イベント一覧名> # 例: 業務イベント一覧(main)
>   status: draft # draft / ready / deprecated のいずれか
>   version: '1.0.0'
>   owners: []
>   tags: []
>   supersedes: []
>   ---
>   ```
>
> - 本文には、少なくとも次の見出し（日本語）と表を含めてください：
>   > 1. 業務イベント一覧
> - 一覧表は次の列を **この順序** で必ず含めてください：
>   > イベントID / イベント名 / トリガー / 主な入力 / 主な出力
> - **イベントID** は `bev-<領域>-<短い英字>` の形式を推奨します（例: `bev-sale-checkout`）。
> - **トリガー** は「誰が/何が/いつ」を短く書き、**主な入力/主な出力** は概念レベルの業務情報として列挙してください。
> - 全体を **業務用語で統一** し、略語を使う場合は、業務用語集に存在する一般的な略語のみとし、意味が推測しづらい略語や内部コードは使用しないでください。
