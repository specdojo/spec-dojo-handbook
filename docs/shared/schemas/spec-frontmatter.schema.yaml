$schema: 'http://json-schema.org/draft-07/schema#'
title: Spec Front Matter
type: object
additionalProperties: false
required:
  - id
  - type
  - title
  - status

definitions:
  idRef:
    type: string
    pattern: '^[a-z0-9][a-z0-9-]*$'
    description: '英小文字・数字・ハイフンのみ。先頭は英小文字または数字。'
  idRefArray:
    type: array
    items:
      $ref: '#/definitions/idRef'
    uniqueItems: true

properties:
  id:
    $ref: '#/definitions/idRef'
    description: '一意なID'
  phase:
    type: string
    enum:
      - need # 要求
      - requirement # 要件
      - specification # 仕様
      - design # 設計
      - implement # 実装
    description: '対象フェーズ'
  type:
    type: string
    enum:
      - project # プロジェクト関連
      - screen # 画面仕様
      - api # API仕様
      - domain # ドメイン仕様
      - data # データ仕様
      - test # テスト仕様
      - flow # 業務フロー仕様
      - rule # 業務ルール仕様
      - architecture # 構造・構成仕様（C4、配置、統合、ネットワーク境界など
      - decision # 設計判断（ADR的な意思決定記録）
      - meta # 共通/横断ルール
      - rulebook # ドキュメント記述ルール
      - instruction # 生成AIへの指示テンプレート
      - guide # ガイドライン
      - migration # 移行計画・設計・手順
      - operations # 運用要件・設計・手順
    description: '仕様の種別'
  title:
    type: string
    minLength: 1
  status:
    type: string
    # draft: 作成中
    # ready: 公開済み
    # deprecated: 廃止済み
    enum: ['draft', 'ready', 'deprecated']
  part_of:
    $ref: '#/definitions/idRefArray'
    default: []
  based_on:
    $ref: '#/definitions/idRefArray'
    default: []
  supersedes:
    $ref: '#/definitions/idRefArray'
    default: []
