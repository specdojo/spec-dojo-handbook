# 受入テスト仕様 − 個別仕様（ATS-D）作成ルール

本ドキュメントは、
**受入テスト仕様（ATS）で定義された受入方針・基準を、
業務シナリオ／受入条件単位に分解して具体化するための仕様書**
を統一形式で記述するための標準ルールです。

ATS-D は、

- 業務受入条件（BAC）を **テストとして判断可能な単位に落とし込む**
- 業務側が「この条件を満たせば受け入れられる」と合意できる状態を作る

ことを主目的とします。

---

## 0. 位置づけ（必読）

```plaintext
TSP（テスト戦略・方針）
 └ ATS（受入テスト仕様）
    └ ATS-D（受入テスト仕様・個別）   ← 本書
       └ ATD（受入テスト設計）
          └ ATD-D（受入テスト設計・個別）
             └ 受入テスト実施・結果
```

| 観点   | ATS            | ATS-D                        |
| ------ | -------------- | ---------------------------- |
| 粒度   | 全体           | **個別（業務単位）**         |
| 主語   | 受入全体       | 業務シナリオ／受入条件       |
| 役割   | 受入基準の定義 | **この条件で合否を判断する** |
| ケース | 書かない       | **書かない**                 |

---

## 1. 全体方針

- ATS-D は **1つの業務受入条件／業務シナリオにつき 1 ファイル**作成します。
- ATS-D は **業務視点の仕様**であり、技術視点は持ち込みません。
- ATS-D では次を明確にします：
  - 対象となる業務受入条件（BAC）
  - 受入判断の観点
  - 業務として成立したと言える条件

- 操作手順・入力値・期待値は **設計（ATD）以下に委譲**します。

---

## 2. 作成単位

ATS-D の作成単位は、次のいずれかです。

- **業務受入条件（BAC）単位**
- **業務シナリオ単位**
- **業務イベント単位**

※ 原則として **BAC と 1:1** の対応を推奨します。

---

## 3. ファイル命名・ID規則

### ファイル名（推奨）

```sh
010-受入テスト仕様-受注完了.md
020-受入テスト仕様-在庫不足時対応.md
```

### ID ルール

| 項目   | ルール                                     |
| ------ | ------------------------------------------ |
| prefix | `ats-`                                     |
| id     | `ats-order-complete`, `ats-stock-shortage` |

※ ID は **業務用語ベースで安定した名称**を使用
（用語集の term を推奨）

---

## 4. 推奨 Frontmatter 項目

| 項目       | 説明                             | 必須     |
| ---------- | -------------------------------- | -------- |
| id         | ATS-D ID（`ats-*`）              | ○        |
| type       | `test` 固定                      | ○        |
| title      | 受入テスト仕様: <業務条件名>     | ○        |
| status     | `draft / ready / deprecated`     | ○        |
| version    | SemVer                           | 任意     |
| owners     | 業務側オーナー                   | 任意     |
| tags       | `acceptance-test`, `business` 等 | 任意     |
| depends_on | `ats-main`, `bac-*`              | **必須** |
| tests      | 対応する ATD / ATD-D             | 任意     |
| supersedes | 置換関係                         | 任意     |

---

## 5. 本文構成（標準テンプレ）

ATS-D は以下の見出しを **必ずこの順序**で記述します。

1. 概要
2. 対象となる業務受入条件
3. 業務シナリオ概要
4. 受入観点
5. 業務成立条件
6. 合否判定基準
7. 対象外
8. メモ / 将来課題

---

## 6. 記述ガイド詳細

### 6.1 概要

- 本 ATS-D が **どの業務条件を受入判断するか** を簡潔に記述します。

例：

> 本仕様は、受注が業務として正常に完了できることを確認するための受入テスト仕様である。

---

### 6.2 対象となる業務受入条件（必須）

- 対応する BAC を明示します。

例：

- bac-order-complete

---

### 6.3 業務シナリオ概要（必須）

- 業務の流れを **業務用語で要約**します。
- 操作手順・画面遷移の逐語列挙は禁止。

例：

- 注文を登録する
- 注文結果を確認する
- 業務として完了扱いになる

---

### 6.4 受入観点（必須）

業務側が「ここを満たしていれば受け入れられる」と判断する観点を整理します。

| 観点カテゴリ | 観点                         |
| ------------ | ---------------------------- |
| 業務         | 業務が滞りなく完了する       |
| 操作         | 業務担当者が迷わず操作できる |
| 情報         | 結果が帳票・画面で確認できる |
| 運用         | 問い合わせ対応が可能である   |

---

### 6.5 業務成立条件（必須）

「この業務が成立した」と言える条件を明確にします。

例：

- 注文が完了状態になる
- 必要な情報が参照可能である
- 業務上の手戻りが発生しない

---

### 6.6 合否判定基準（必須）

- 合格／不合格を **業務判断として判定できる表現**で記述します。

例：

- 業務成立条件をすべて満たすこと
- 業務に支障をきたす不具合が存在しないこと

※ 数値・技術基準は SAC / NFR に委ねます。

---

### 6.7 対象外

- 本受入条件では扱わない事項

---

### 6.8 メモ / 将来課題

- 将来の受入条件追加
- 未確定事項

---

## 7. 禁止事項

| 禁止事項               | 理由               |
| ---------------------- | ------------------ |
| 操作手順の逐語列挙     | UI変更に弱い       |
| 入力値・期待値の具体化 | 設計レベルの責務   |
| 技術用語・実装詳細     | 業務視点から逸脱   |
| 個別テストケースの列挙 | ATD / ATD-D に委譲 |

---

## 8. サンプル（最小）

```yaml
---
id: ats-order-complete
type: test
title: 受入テスト仕様: 受注完了
status: draft
version: '1.0.0'
depends_on:
  - ats-main
  - bac-order-complete
---
```

---

## 9. 生成AI向け指示テンプレート

> - 以下のルールに従って **受入テスト仕様 − 個別仕様（ATS-D）** を 1 ファイル作成してください。
> - 対象は **1つの業務受入条件（BAC）** としてください。
> - 業務成立条件・受入観点を中心に記述し、操作手順や技術詳細は記載しないでください。
> - 合否判定が業務判断として可能な表現を用いてください。
