# システム化機能一覧（System Function List, SFL）作成ルール

業務をシステムで実現するための機能（ユースケースや画面・バッチ単位など）を一覧化し、各機能の目的・入出力・関連プロセスを明確にします。

## 1. メタデータ

| 項目       | 説明                          | 必須 |
| ---------- | ----------------------------- | ---- |
| id         | 機能一覧ID (sfl-xxx-xxxx)     | ○    |
| type       | `domain` 固定                 | ○    |
| title      | 機能一覧名                    | ○    |
| status     | `draft`/`ready`/`deprecated`  | ○    |
| version    | バージョン                    | 任意 |
| owners     | 担当者                        | 任意 |
| tags       | タグ・分類                    | 任意 |
| supersedes | 置き換え関係（古仕様→新仕様） | 任意 |

### 1.1 ID規約

- 機能一覧IDは正規表現 `^sfl-[a-z0-9-]+$` に合致する一意IDを使用する。
- `type: domain` は業務ドメイン仕様であることを示す。

注意: 本ドキュメントのファイル識別子は `sfl-` を使用します（例: `sfl-main`）。
個々の機能を識別する **機能ID** は `sf-` プレフィックスを用いる `lower-kebab` 形式（正規表現: `^sf-[a-z0-9-]+$`）を採用してください（例: `sf-product-register`）。

## 2. 記述ルール

- 機能一覧は **表形式** で整理する。1行が1機能を表す。
- 機能名・概要は業務観点で記述し、実装技術や画面遷移手順など実装詳細は含めない。
- 項目の表現は他仕様（BDD／CDSL／CCD／用語集）と整合性を保つ。

### 2.1 標準列の定義（必須順）

| 列名             | 説明                                                                            |
| ---------------- | ------------------------------------------------------------------------------- |
| **機能ID**       | 機能を識別するID（例: sf-product-register。`sf-` プレフィックスの lower-kebab） |
| **機能名**       | 業務担当が理解できる日本語名（簡潔）                                            |
| **概要**         | 機能の目的／要約（何を実現するか）                                              |
| **入出力**       | 主な入力と出力（データ種別や帳票、外部システムとのインターフェース）            |
| **関連プロセス** | 関連する業務領域（例：調達、販売、会計）                                        |
| **関連仕様ID**   | 関連する他仕様の `id`（業務プロセス / 画面 / 帳票 等のファイルID）              |
| **備考**         | 追加説明、依存関係、制約など                                                    |

※ 列順は上記に統一してください。プロジェクト固有の列を追加する場合は、必須列を変えないこと。

## 3. サンプル

### 3.1 メタデータ（front-matter YAML）

```yaml
---
id: sfl-main
type: domain
title: システム化機能一覧(main)
version: 0.1.0
status: draft
owners: []
tags: []
supersedes: []
---
```

### 3.2 機能一覧（表）

| 機能ID              | 機能名   | 概要                                           | 入出力                                      | 関連プロセス | 関連仕様ID                 | 備考 |
| ------------------- | -------- | ---------------------------------------------- | ------------------------------------------- | ------------ | -------------------------- | ---- |
| sf-product-register | 商品登録 | 新しい商品を登録し、在庫管理テーブルを作成する | 入: 商品マスタ情報 / 出: 商品ID             | 管理、販売   | bps-product, uis-admin     |      |
| sf-closing-daily    | レジ締め | 当日の売上を集計し日次レポートを生成する       | 入: 売上トランザクション / 出: 日次レポート | 会計         | bps-closing, rpt-daily-sum |      |

## 4. 生成 AI への指示テンプレート

生成 AI に機能一覧（SFL）を作らせるときは、下記の指示に従ってください。

> - 以下のルールに従って、**システム化機能一覧（SFL）** を 1 ファイル作成してください。出力は **Markdown** とします。
> - 先頭に YAML Frontmatter を付与し、少なくとも `id` / `type` / `title` / `status` を含めてください。`id` は `sfl-<英小文字とハイフン>` 形式としてください。
> - 機能一覧は必ず次の列を**この順序**で含めてください：
>   > 機能ID / 機能名 / 概要 / 入出力 / 関連プロセス / 関連仕様ID / 備考
> - 機能名・概要は業務視点で簡潔に記述し、実装詳細（テーブル定義、SQL、クラス名、画面操作の逐語列挙など）は書かないでください。
> - 禁止: 実装コード、物理テーブル名、SQL全文、API内部実装、画面操作手順の逐語列挙。
> - **関連仕様ID の記載ルール**: 関連する仕様ファイルの `id` をカンマ区切りで列挙してください。識別子のプレフィックス例: `bps-`（業務プロセス仕様）、`uis-`（画面仕様）、`bds-`（帳票仕様）など。
> - 機能ID は `sf-` プレフィックスで lower-kebab（例: `sf-product-register`）を使用してください。
> - 他仕様（BDD／CDSL／CCD／用語集）との用語整合性を保ってください。
